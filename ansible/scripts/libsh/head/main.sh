#!/bin/bash


function_selector_runner(){

    escaped_list=`echo $@ |sed 's/[!]/\\\!/g'`

    test=`echo "${@}" | grep -E "\\!\_"  && echo 1 || echo 0`

    if [[ "$test" == 1 ]]; then
        #echo "test = 1"
        IFS='"\!_' in=($escaped_list)
        command_echo_run="${in[@]}"
    else
        #echo "else test != 1"
        IFS='"\' in=($@)

        command_echo_run=`echo ${in[@]}|sed 's/[!]/\\\!/g'`
    fi

    if [ "$type_of_run" = "print_only" ] || [ "$type_of_run" = "run_from_wrapper" ]; then

        if [ "$type_of_run" = "run_from_wrapper" ]; then
            
            echo "$command_echo_run"

        else

            string_column_one=`echo $command_echo_run | awk '{print $4}'` 


            echo -e "         ${YELLOW}Print type_of_run is${NC} print_only for manual run ${GREEN}${string_column_one}${NC}"
            echo "     |>.......................................................................................................................................................<|"
            echo "         "
            echo "         $command_echo_run"
            echo "         "
            echo "     |>.......................................................................................................................................................<|"

        fi

    else

        if [ "$type_of_run" = "debug" ]; then

            echo "     |>.......................................................................................................................................................<|"
            echo "          Start running command: $command_echo_run"
            echo "     |>.......................................................................................................................................................<|"
            eval "${command_echo_run}"
            echo "     |>.......................................................................................................................................................<|"
            echo "          Finish running command: $command_echo_run"
            echo "     |>.......................................................................................................................................................<|"

        else

            echo "     |>.......................................................................................................................................................<|"
            echo "$command_echo_run"
            eval "${command_echo_run}"
            echo "     |>.......................................................................................................................................................<|"
        fi

    fi

}
